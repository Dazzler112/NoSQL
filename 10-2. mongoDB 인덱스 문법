⁕몽고디비 인덱스 문법
 

•인덱스 생성
--------------------------------------------------------------------------------------------------------------------------------
db.book.createIndex({name:1}) // name키에 인덱스 설정

db.book.createIndex({name:"text"}) // name키에 덱스트 인덱스 생성
--------------------------------------------------------------------------------------------------------------------------------
 

•인덱스 조회
인덱스는 처음 db를 만들 때 자동으로 생성되는 system.indexes 컬렉션에 저장됩니다. 

--------------------------------------------------------------------------------------------------------------------------------
db.book.getIndexes();

예)-------------------------------------------------------------｜
> db.book.createIndex({name:1})                                 ｜
{                                                               ｜
        "numIndexesBefore" : 1,                                 ｜
        "numIndexesAfter" : 2,                                  ｜
        "createdCollectionAutomatically" : false,               ｜
        "ok" : 1                                                ｜
}                                                               ｜
> db.book.getIndexess()                                         ｜
[                                                               ｜
      {                                                         ｜
            "v" : 2,                                            ｜
            "key" : {                                           ｜
                    "_id" : 1                                   ｜ 
            },                                                  ｜
            "name" : "_id_"                                     ｜
      },                                                        ｜
      {                                                         ｜
            "v" : 2,                                            ｜
            "key" : {                                           ｜
                    "name" : 1                                  ｜
            },                                                  ｜
            "name" : "name_1"                                   ｜
      }                                                         ｜
]                                                               ｜
----------------------------------------------------------------｜
--------------------------------------------------------------------------------------------------------------------------------
 

•인덱스 제거
특정 인덱스를 제거하려면
--------------------------------------------------------------------------------------------------------------------------------
// 특정 인덱스 제거
db.book.dropIndex(필드이름);

// 모두 제거
db.book.dropIndexes();
--------------------------------------------------------------------------------------------------------------------------------
 

•인덱스 조합
몽고DB는 똑똑하게 여러 인덱스를 조합합니다.
만약 name필드와 hp필드에 대한 인덱스가 따로 있으면,
--------------------------------------------------------------------------------------------------------------------------------
db.monsters.find({ name: 'Slime', hp: { $gt: 10 } })
--------------------------------------------------------------------------------------------------------------------------------
를 할 경우, 두 인덱스를 모두 사용하여 조회합니다.

 

•인덱스 단점
인덱스의 단점은 인덱스 자체가 용량을 차지한다는 겁니다.
--------------------------------------------------------------------------------------------------------------------------------
db.monsters.totalIndexSize();

예)-------------------------------------------------------------｜
> db.monsters.totalIndexSize()                                  ｜
16352                                                           ｜
----------------------------------------------------------------｜
--------------------------------------------------------------------------------------------------------------------------------
예의 위의 인덱스 하나를 설정했더니 16kb를 잡아먹게 됩니다.
너무 많은 인덱스를 사용해서 용량을 낭비하지 않도록 합시다.
